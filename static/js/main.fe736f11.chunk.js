(this.webpackJsonpreactapp=this.webpackJsonpreactapp||[]).push([[0],{128:function(e,t,c){},207:function(e,t,c){},208:function(e,t,c){},209:function(e,t,c){},210:function(e,t,c){},211:function(e,t,c){},217:function(e,t,c){"use strict";c.r(t);var n=c(0),a=c.n(n),s=c(22),i=c.n(s),r=c(51),o=(c(127),c(128),c(20)),l=c(220),j=c(6),u=l.a.Title,b=function(){return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(u,{children:"Hello World!"}),Object(j.jsx)(r.b,{to:"".concat(V,"/aviasales"),children:"\u041f\u043e\u0438\u043a\u0441 \u0434\u0435\u0448\u0451\u0432\u044b\u0445 \u0430\u0432\u0438\u0430\u0431\u0438\u043b\u0435\u0442\u043e\u0432"})]})},d=c(66),h=c(27),O=c(221),f=c(120),p=c(224),v=c(219),m=c(56),x=c(223),k=["\u0411\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a","1 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430","2 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438","3 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438"],g=(c(207),l.a.Title),_=x.a.Group,w=function(e){var t=Object(n.useState)(!0),c=Object(h.a)(t,2),a=c[0],s=c[1],i=Object(n.useState)(a?e.items:[]),r=Object(h.a)(i,2),o=r[0],l=r[1],u=Object(n.useCallback)((function(t){l(t),s(t.length===e.items.length),e.clickFilterHandler(function(e){for(var t=[],c=0,n=Object.entries(k);c<n.length;c++){var a=n[c],s=Object(h.a)(a,2),i=s[0],r=s[1];e.includes(r)&&t.push(+i)}return t}(t))}),[]),b=Object(n.useCallback)((function(t){l(t.target.checked?e.items:[]),s(t.target.checked),e.clickFilterHandler(t.target.checked?e.items:[])}),[]);return Object(j.jsxs)("div",{className:"filter",children:[Object(j.jsx)(g,{level:5,children:e.title}),Object(j.jsx)(x.a,{checked:a,onChange:b,children:"\u0412\u0441\u0435"}),Object(j.jsx)(_,{options:e.items,value:o,onChange:u})]})},N=c(55),y="1",T="2",S=[{key:"1",title:"\u0421\u0430\u043c\u044b\u0439 \u0434\u0435\u0448\u0435\u0432\u044b\u0439"},{key:2,title:"\u0421\u0430\u043c\u044b\u0439 \u0431\u044b\u0441\u0442\u0440\u044b\u0439"}],C={0:"\u0411\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a",1:"1 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430",2:"2 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438",3:"3 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438"},H=[{title:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a",items:Object.values(C)}],E=function(e){return e.reduce((function(e,t){return e+t.duration}),0)},M=function(e,t,c){var n=[];return t===y?n=e.sort((function(e,t){return e.price-t.price})):t===T&&(n=e.sort((function(e,t){return E(e.segments)-E(t.segments)}))),n=function(e,t){return 0===t.length?[]:t.length===k.length?e:e.filter((function(e){var c=Object(h.a)(e.segments,2),n=c[0],a=c[1];return t.includes(n.stops.length)||t.includes(a.stops.length)}))}(n,c)},F=function(e,t){var c=Date.parse(e),n=60*t*1e3,a=new Date(e),s=new Date(c+n);return"".concat(a.getHours(),":").concat(a.getMinutes()," - ").concat(s.getHours(),":").concat(s.getMinutes())},z=function(e){var t=0,c=Math.floor(e/60),n=e%60;return c>24&&(t=Math.ceil(c/24),c%=24),n=n<10?"0".concat(n):n,t>0?"".concat(t,"\u0414 ").concat(c,"\u0427 ").concat(n,"\u041c"):"".concat(c,"\u0427 ").concat(n,"\u041c")},D=function(e){var t="";return 0===e?t="\u0411\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a":1===e?t="".concat(e," \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430"):e>=2&&e<5?t="".concat(e," \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438"):e>=5&&(t="".concat(e," \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a")),t.toUpperCase()},I=(c(208),function(e){var t=e.date,c=e.duration;return Object(j.jsxs)("div",{className:"information",children:[Object(j.jsxs)("div",{className:"information__route",children:[Object(j.jsxs)("div",{className:"information__title",children:[e.origin,"-",e.destination]}),Object(j.jsx)("div",{className:"information__description",children:F(t,c)})]}),Object(j.jsxs)("div",{className:"information__length",children:[Object(j.jsx)("div",{className:"information__title",children:"\u0412 \u041f\u0423\u0422\u0418"}),Object(j.jsx)("div",{className:"information__description",children:z(c)})]}),Object(j.jsxs)("div",{className:"information__stop",children:[Object(j.jsx)("div",{className:"information__title",children:D(e.stops.length)}),Object(j.jsx)("div",{className:"information__description",children:e.stops.join(", ")})]})]})}),W=(c(209),function(e){return Object(j.jsxs)("div",{className:"card",children:[Object(j.jsxs)("header",{className:"card__header",children:[Object(j.jsxs)("div",{className:"card__price",children:[e.price," \u0420"]}),Object(j.jsx)("img",{src:"https://pics.avs.io/99/36/".concat(e.carrier,".png"),alt:e.carrier})]}),e.segments.map((function(e){return Object(n.createElement)(I,Object(N.a)(Object(N.a)({},e),{},{key:e.duration}))}))]})}),A=(c(210),function(e){return Object(j.jsx)("div",{className:"aviasales-list-tickets",children:e.tickets.map((function(e){return Object(n.createElement)(W,Object(N.a)(Object(N.a)({},e),{},{key:"".concat(e.price+Math.random(),"-").concat(e.carrier)}))}))})}),B=function(){return Object(j.jsx)("header",{className:"aviasales-header",children:"Aviasales"})},J=c(222),G=function(e){return Object(j.jsx)(J.a,{type:e.type,size:e.size,onClick:e.onClickHandler,children:e.label})},K=c(65),P=c.n(K),U=c(99),$=function(){var e=Object(U.a)(P.a.mark((function e(){var t,c;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://front-test.beta.aviasales.ru/search");case 2:return t=e.sent,e.next=5,t.json();case 5:return c=e.sent,e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(U.a)(P.a.mark((function e(t){var c,n,a;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=!0;case 1:if(!c){e.next=23;break}return e.prev=2,e.next=5,fetch("".concat("https://front-test.beta.aviasales.ru/tickets","?searchId=").concat(t));case 5:if(!((n=e.sent).status>=200&&n.status<=299)){e.next=13;break}return e.next=9,n.json();case 9:return a=e.sent,e.abrupt("return",a);case 13:throw c=!1,new Error("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a");case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(2),c=!0,console.log("---data",e.t0);case 21:e.next=1;break;case 23:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(t){return e.apply(this,arguments)}}(),L=(c(211),l.a.Text),Q=O.a.TabPane,R=function(){var e=Object(n.useState)(null),t=Object(h.a)(e,2),c=t[0],a=t[1],s=Object(n.useState)([]),i=Object(h.a)(s,2),r=i[0],o=i[1],l=Object(n.useState)(!1),u=Object(h.a)(l,2),b=u[0],x=u[1],k=Object(n.useState)(!0),g=Object(h.a)(k,2),_=g[0],N=g[1],T=Object(n.useState)(y),E=Object(h.a)(T,2),F=E[0],z=E[1],D=Object(n.useState)({tickets:[],viewTickets:[]}),I=Object(h.a)(D,2),W=I[0],J=I[1],K=Object(n.useState)(Object.keys(C)),P=Object(h.a)(K,2),U=P[0],R=P[1];Object(n.useEffect)((function(){$().then((function(e){return a(e.searchId)})).catch((function(){return f.b.warning("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a, \u043f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443")}))}),[]),Object(n.useEffect)((function(){null!==c&&(b||q(c).then((function(e){if(x(e.stop),o([].concat(Object(d.a)(r),Object(d.a)(e.tickets))),_){var t=M(r,F,U);J({tickets:t,viewTickets:t.slice().splice(0,5)})}N(!1)})))}),[b,c,r]),Object(n.useEffect)((function(){if(b){var e=M(r,F,U);J({tickets:e,viewTickets:e.slice().splice(0,5)})}}),[b,r,F,U]);var V=function(){J({tickets:W.tickets,viewTickets:[].concat(Object(d.a)(W.viewTickets),Object(d.a)(W.tickets.slice().splice(W.viewTickets.length,5)))})};return Object(j.jsxs)("section",{className:"aviasales",children:[Object(j.jsx)(B,{}),Object(j.jsxs)("div",{className:"aviasales__wrapper",children:[Object(j.jsx)("aside",{className:"aviasales__filters",children:H.map((function(e){return Object(j.jsx)(w,{title:e.title,items:e.items,clickFilterHandler:R})}))}),Object(j.jsx)("div",{className:"aviasales__content",children:Object(j.jsx)(O.a,{defaultActiveKey:F,onChange:function(e){var t=M(r,e,U);z(e),J((function(){return{tickets:t,viewTickets:t.slice().splice(0,5)}}))},children:S.map((function(e){return Object(j.jsxs)(Q,{tab:e.title,children:[Object(j.jsxs)(p.b,{direction:"vertical",children:[Object(j.jsx)(L,{children:"\u041c\u044b \u043d\u0430\u0448\u043b\u0438 ".concat(r.length," \u0431\u0438\u043b\u0435\u0442\u043e\u0432")}),Object(j.jsx)(L,{children:"\u041c\u044b \u043d\u0430\u0448\u043b\u0438 ".concat(W.tickets.length," \u0431\u0438\u043b\u0435\u0442\u043e\u0432 \u043f\u043e \u0432\u044b\u0431\u0440\u0430\u043d\u044b\u043c \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u043c")}),Object(j.jsx)(L,{children:"\u041f\u043e\u043a\u0430\u0437\u0430\u043d\u043e ".concat(W.viewTickets.length," \u0438\u0437 ").concat(W.tickets.length," \u0431\u0438\u043b\u0435\u0442\u043e\u0432")}),!b&&Object(j.jsx)(v.a,{})]}),0===U.length&&Object(j.jsx)(m.a,{description:"\u041c\u044b \u043d\u0430\u0448\u043b\u0438 ".concat(W.tickets.length," \u0431\u0438\u043b\u0435\u0442\u043e\u0432 \u043f\u043e \u0432\u044b\u0431\u0440\u0430\u043d\u044b\u043c \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u043c")}),W.tickets.length>0&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(A,{tickets:W.viewTickets}),Object(j.jsx)(G,{type:"primary",size:"large",onClickHandler:V,label:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0435\u0449\u0451 ".concat(5," \u0431\u0438\u043b\u0435\u0442\u043e\u0432")})]})]},e.key)}))})})]})]})},V="/reactapp",X=function(){return Object(j.jsx)(r.a,{basename:"/reactapp",children:Object(j.jsxs)(o.c,{children:[Object(j.jsx)(o.a,{path:"".concat(V),component:b,exact:!0}),Object(j.jsx)(o.a,{path:"".concat(V,"/aviasales"),component:R,exact:!0})]})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(j.jsx)(a.a.StrictMode,{children:Object(j.jsx)(r.a,{children:Object(j.jsx)(X,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[217,1,2]]]);
//# sourceMappingURL=main.fe736f11.chunk.js.map