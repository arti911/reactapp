(this.webpackJsonpreactapp=this.webpackJsonpreactapp||[]).push([[0],{128:function(e,t,c){},207:function(e,t,c){},208:function(e,t,c){},209:function(e,t,c){},210:function(e,t,c){},211:function(e,t,c){},217:function(e,t,c){"use strict";c.r(t);var n=c(0),a=c.n(n),s=c(22),i=c.n(s),r=c(51),o=(c(127),c(128),c(222)),l=c(21),j=c(220),u=c(6),b=j.a.Title,d=function(){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(b,{children:"Hello World!"}),Object(u.jsx)(r.b,{to:"".concat(X,"/aviasales"),children:"\u041f\u043e\u0438\u043a\u0441 \u0434\u0435\u0448\u0451\u0432\u044b\u0445 \u0430\u0432\u0438\u0430\u0431\u0438\u043b\u0435\u0442\u043e\u0432"})]})},h=c(66),O=c(27),f=c(221),p=c(120),v=c(225),m=c(219),x=c(56),k=c(224),g=["\u0411\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a","1 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430","2 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438","3 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438"],_=(c(207),j.a.Title),w=k.a.Group,N=function(e){var t=Object(n.useState)(!0),c=Object(O.a)(t,2),a=c[0],s=c[1],i=Object(n.useState)(a?e.items:[]),r=Object(O.a)(i,2),o=r[0],l=r[1],j=Object(n.useCallback)((function(t){l(t),s(t.length===e.items.length),e.clickFilterHandler(function(e){for(var t=[],c=0,n=Object.entries(g);c<n.length;c++){var a=n[c],s=Object(O.a)(a,2),i=s[0],r=s[1];e.includes(r)&&t.push(+i)}return t}(t))}),[]),b=Object(n.useCallback)((function(t){l(t.target.checked?e.items:[]),s(t.target.checked),e.clickFilterHandler(t.target.checked?e.items:[])}),[]);return Object(u.jsxs)("div",{className:"filter",children:[Object(u.jsx)(_,{level:5,children:e.title}),Object(u.jsx)(k.a,{checked:a,onChange:b,children:"\u0412\u0441\u0435"}),Object(u.jsx)(w,{options:e.items,value:o,onChange:j})]})},y=c(55),T="1",C="2",S=[{key:"1",title:"\u0421\u0430\u043c\u044b\u0439 \u0434\u0435\u0448\u0435\u0432\u044b\u0439"},{key:2,title:"\u0421\u0430\u043c\u044b\u0439 \u0431\u044b\u0441\u0442\u0440\u044b\u0439"}],H={0:"\u0411\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a",1:"1 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430",2:"2 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438",3:"3 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438"},E=[{title:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a",items:Object.values(H)}],M=function(e){return e.reduce((function(e,t){return e+t.duration}),0)},F=function(e,t,c){var n=[];return t===T?n=e.sort((function(e,t){return e.price-t.price})):t===C&&(n=e.sort((function(e,t){return M(e.segments)-M(t.segments)}))),n=function(e,t){return 0===t.length?[]:t.length===g.length?e:e.filter((function(e){var c=Object(O.a)(e.segments,2),n=c[0],a=c[1];return t.includes(n.stops.length)||t.includes(a.stops.length)}))}(n,c)},z=function(e,t){var c=Date.parse(e),n=60*t*1e3,a=new Date(e),s=new Date(c+n);return"".concat(a.getHours(),":").concat(a.getMinutes()," - ").concat(s.getHours(),":").concat(s.getMinutes())},D=function(e){var t=0,c=Math.floor(e/60),n=e%60;return c>24&&(t=Math.ceil(c/24),c%=24),n=n<10?"0".concat(n):n,t>0?"".concat(t,"\u0414 ").concat(c,"\u0427 ").concat(n,"\u041c"):"".concat(c,"\u0427 ").concat(n,"\u041c")},I=function(e){var t="";return 0===e?t="\u0411\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a":1===e?t="".concat(e," \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430"):e>=2&&e<5?t="".concat(e," \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438"):e>=5&&(t="".concat(e," \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a")),t.toUpperCase()},W=(c(208),function(e){var t=e.date,c=e.duration;return Object(u.jsxs)("div",{className:"information",children:[Object(u.jsxs)("div",{className:"information__route",children:[Object(u.jsxs)("div",{className:"information__title",children:[e.origin,"-",e.destination]}),Object(u.jsx)("div",{className:"information__description",children:z(t,c)})]}),Object(u.jsxs)("div",{className:"information__length",children:[Object(u.jsx)("div",{className:"information__title",children:"\u0412 \u041f\u0423\u0422\u0418"}),Object(u.jsx)("div",{className:"information__description",children:D(c)})]}),Object(u.jsxs)("div",{className:"information__stop",children:[Object(u.jsx)("div",{className:"information__title",children:I(e.stops.length)}),Object(u.jsx)("div",{className:"information__description",children:e.stops.join(", ")})]})]})}),A=(c(209),function(e){return Object(u.jsxs)("div",{className:"card",children:[Object(u.jsxs)("header",{className:"card__header",children:[Object(u.jsxs)("div",{className:"card__price",children:[e.price," \u0420"]}),Object(u.jsx)("img",{src:"https://pics.avs.io/99/36/".concat(e.carrier,".png"),alt:e.carrier})]}),e.segments.map((function(e){return Object(n.createElement)(W,Object(y.a)(Object(y.a)({},e),{},{key:e.duration}))}))]})}),B=(c(210),function(e){return Object(u.jsx)("div",{className:"aviasales-list-tickets",children:e.tickets.map((function(e){return Object(n.createElement)(A,Object(y.a)(Object(y.a)({},e),{},{key:"".concat(e.price+Math.random(),"-").concat(e.carrier)}))}))})}),J=function(){return Object(u.jsx)("header",{className:"aviasales-header",children:"Aviasales"})},G=c(223),K=function(e){return Object(u.jsx)(G.a,{type:e.type,size:e.size,onClick:e.onClickHandler,children:e.label})},P=c(65),U=c.n(P),$=c(99),q=function(){var e=Object($.a)(U.a.mark((function e(){var t,c;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://front-test.beta.aviasales.ru/search");case 2:return t=e.sent,e.next=5,t.json();case 5:return c=e.sent,e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=Object($.a)(U.a.mark((function e(t){var c,n,a;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=!0;case 1:if(!c){e.next=23;break}return e.prev=2,e.next=5,fetch("".concat("https://front-test.beta.aviasales.ru/tickets","?searchId=").concat(t));case 5:if(!((n=e.sent).status>=200&&n.status<=299)){e.next=13;break}return e.next=9,n.json();case 9:return a=e.sent,e.abrupt("return",a);case 13:throw c=!1,new Error("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a");case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(2),c=!0,console.log("---data",e.t0);case 21:e.next=1;break;case 23:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(t){return e.apply(this,arguments)}}(),Q=(c(211),j.a.Text),R=f.a.TabPane,V=function(){var e=Object(n.useState)(null),t=Object(O.a)(e,2),c=t[0],a=t[1],s=Object(n.useState)([]),i=Object(O.a)(s,2),r=i[0],o=i[1],l=Object(n.useState)(!1),j=Object(O.a)(l,2),b=j[0],d=j[1],k=Object(n.useState)(!0),g=Object(O.a)(k,2),_=g[0],w=g[1],y=Object(n.useState)(T),C=Object(O.a)(y,2),M=C[0],z=C[1],D=Object(n.useState)({tickets:[],viewTickets:[]}),I=Object(O.a)(D,2),W=I[0],A=I[1],G=Object(n.useState)(Object.keys(H)),P=Object(O.a)(G,2),U=P[0],$=P[1];Object(n.useEffect)((function(){q().then((function(e){return a(e.searchId)})).catch((function(){return p.b.warning("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a, \u043f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443")}))}),[]),Object(n.useEffect)((function(){null!==c&&(b||L(c).then((function(e){if(d(e.stop),o([].concat(Object(h.a)(r),Object(h.a)(e.tickets))),_){var t=F(r,M,U);A({tickets:t,viewTickets:t.slice().splice(0,5)})}w(!1)})))}),[b,c,r]),Object(n.useEffect)((function(){if(b){var e=F(r,M,U);A({tickets:e,viewTickets:e.slice().splice(0,5)})}}),[b,r,M,U]);var V=function(){A({tickets:W.tickets,viewTickets:[].concat(Object(h.a)(W.viewTickets),Object(h.a)(W.tickets.slice().splice(W.viewTickets.length,5)))})};return Object(u.jsxs)("section",{className:"aviasales",children:[Object(u.jsx)(J,{}),Object(u.jsxs)("div",{className:"aviasales__wrapper",children:[Object(u.jsx)("aside",{className:"aviasales__filters",children:E.map((function(e){return Object(u.jsx)(N,{title:e.title,items:e.items,clickFilterHandler:$})}))}),Object(u.jsx)("div",{className:"aviasales__content",children:Object(u.jsx)(f.a,{defaultActiveKey:M,onChange:function(e){var t=F(r,e,U);z(e),A((function(){return{tickets:t,viewTickets:t.slice().splice(0,5)}}))},children:S.map((function(e){return Object(u.jsxs)(R,{tab:e.title,children:[Object(u.jsxs)(v.b,{direction:"vertical",children:[Object(u.jsx)(Q,{children:"\u041c\u044b \u043d\u0430\u0448\u043b\u0438 ".concat(r.length," \u0431\u0438\u043b\u0435\u0442\u043e\u0432")}),Object(u.jsx)(Q,{children:"\u041c\u044b \u043d\u0430\u0448\u043b\u0438 ".concat(W.tickets.length," \u0431\u0438\u043b\u0435\u0442\u043e\u0432 \u043f\u043e \u0432\u044b\u0431\u0440\u0430\u043d\u044b\u043c \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u043c")}),Object(u.jsx)(Q,{children:"\u041f\u043e\u043a\u0430\u0437\u0430\u043d\u043e ".concat(W.viewTickets.length," \u0438\u0437 ").concat(W.tickets.length," \u0431\u0438\u043b\u0435\u0442\u043e\u0432")}),!b&&Object(u.jsx)(m.a,{})]}),0===U.length&&Object(u.jsx)(x.a,{description:"\u041c\u044b \u043d\u0430\u0448\u043b\u0438 ".concat(W.tickets.length," \u0431\u0438\u043b\u0435\u0442\u043e\u0432 \u043f\u043e \u0432\u044b\u0431\u0440\u0430\u043d\u044b\u043c \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u043c")}),W.tickets.length>0&&Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(B,{tickets:W.viewTickets}),Object(u.jsx)(K,{type:"primary",size:"large",onClickHandler:V,label:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0435\u0449\u0451 ".concat(5," \u0431\u0438\u043b\u0435\u0442\u043e\u0432")})]})]},e.key)}))})})]})]})},X="/reactapp",Y=o.a.Content,Z=function(){return Object(u.jsx)(r.a,{children:Object(u.jsxs)(Y,{children:[Object(u.jsx)(l.a,{path:"".concat(X),component:d,exact:!0}),Object(u.jsx)(l.a,{path:"".concat(X,"/aviasales"),component:V,exact:!0})]})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(u.jsx)(a.a.StrictMode,{children:Object(u.jsx)(r.a,{children:Object(u.jsx)(Z,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[217,1,2]]]);
//# sourceMappingURL=main.154b71cb.chunk.js.map