(this.webpackJsonpreactapp=this.webpackJsonpreactapp||[]).push([[0],{138:function(e,t,c){},139:function(e,t,c){},218:function(e,t,c){},219:function(e,t,c){},220:function(e,t,c){},221:function(e,t,c){},222:function(e,t,c){},228:function(e,t,c){"use strict";c.r(t);var n=c(24),a=c.n(n),s=c(57),i=c(231),r=(c(137),c(138),c(22)),o=c(233),l=(c(139),c(7)),j=o.a.Title,u=function(){return Object(l.jsxs)("section",{className:"main",children:[Object(l.jsx)(j,{children:"Hello World!"}),Object(l.jsx)(s.b,{to:"/aviasales",children:"\u041f\u043e\u0438\u043a\u0441 \u0434\u0435\u0448\u0451\u0432\u044b\u0445 \u0430\u0432\u0438\u0430\u0431\u0438\u043b\u0435\u0442\u043e\u0432"})]})},b=c(75),d=c(29),h=c(0),O=c(234),f=c(130),v=c(232),p=c(236),m=c(230),x=c(63),k=c(110),g=c(235),w=["\u0411\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a","1 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430","2 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438","3 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438"],_=(c(218),o.a.Title),N=g.a.Group,y=function(e){var t=Object(h.useState)(!0),c=Object(d.a)(t,2),n=c[0],a=c[1],s=Object(h.useState)(n?e.items:[]),i=Object(d.a)(s,2),r=i[0],o=i[1],j=Object(h.useCallback)((function(t){o(t),a(t.length===e.items.length),e.clickFilterHandler(function(e){for(var t=[],c=0,n=Object.entries(w);c<n.length;c++){var a=n[c],s=Object(d.a)(a,2),i=s[0],r=s[1];e.includes(r)&&t.push(i)}return t}(t))}),[]),u=Object(h.useCallback)((function(t){o(t.target.checked?e.items:[]),a(t.target.checked),e.clickFilterHandler(t.target.checked?e.items:[])}),[]);return Object(l.jsxs)("div",{className:"filter",children:[Object(l.jsx)(_,{level:5,children:e.title}),Object(l.jsx)(g.a,{checked:n,onChange:u,children:"\u0412\u0441\u0435"}),Object(l.jsx)(N,{options:e.items,value:r,onChange:j})]})},T=c(62),C="1",S="2",H=[{key:"1",title:"\u0421\u0430\u043c\u044b\u0439 \u0434\u0435\u0448\u0435\u0432\u044b\u0439"},{key:"2",title:"\u0421\u0430\u043c\u044b\u0439 \u0431\u044b\u0441\u0442\u0440\u044b\u0439"}],E={0:"\u0411\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a",1:"1 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430",2:"2 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438",3:"3 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438"},M=[{title:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a",items:Object.values(E)}],B=function(e){return e.reduce((function(e,t){return e+t.duration}),0)},F=function(e,t,c){var n=[];return t===C?n=e.sort((function(e,t){return e.price-t.price})):t===S&&(n=e.sort((function(e,t){return B(e.segments)-B(t.segments)}))),n=function(e,t){return 0===t.length?[]:t.length===w.length?e:e.filter((function(e){var c=Object(d.a)(e.segments,2),n=c[0],a=c[1];return t.includes("".concat(n.stops.length))||t.includes("".concat(a.stops.length))}))}(n,c)},z=function(e,t){var c=Date.parse(e),n=60*t*1e3,a=new Date(e),s=new Date(c+n);return"".concat(a.getHours(),":").concat(a.getMinutes()," - ").concat(s.getHours(),":").concat(s.getMinutes())},D=function(e){var t=0,c=Math.floor(e/60),n=e%60;return c>24&&(t=Math.ceil(c/24),c%=24),n=n<10?"0".concat(n):n,t>0?"".concat(t,"\u0414 ").concat(c,"\u0427 ").concat(n,"\u041c"):"".concat(c,"\u0427 ").concat(n,"\u041c")},I=function(e){var t="";return 0===e?t="\u0411\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a":1===e?t="".concat(e," \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430"):e>=2&&e<5?t="".concat(e," \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438"):e>=5&&(t="".concat(e," \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a")),t.toUpperCase()},W=(c(219),function(e){return Object(l.jsxs)("div",{className:"information",children:[Object(l.jsxs)("div",{className:"information__route",children:[Object(l.jsxs)("div",{className:"information__title",children:[e.origin,"-",e.destination]}),Object(l.jsx)("div",{className:"information__description",children:z(e.date,e.duration)})]}),Object(l.jsxs)("div",{className:"information__length",children:[Object(l.jsx)("div",{className:"information__title",children:"\u0412 \u041f\u0423\u0422\u0418"}),Object(l.jsx)("div",{className:"information__description",children:D(e.duration)})]}),Object(l.jsxs)("div",{className:"information__stop",children:[Object(l.jsx)("div",{className:"information__title",children:I(e.stops.length)}),Object(l.jsx)("div",{className:"information__description",children:e.stops.join(", ")})]})]})}),A=(c(220),function(e){return Object(l.jsxs)("div",{className:"card",children:[Object(l.jsxs)("header",{className:"card__header",children:[Object(l.jsxs)("div",{className:"card__price",children:[e.price," \u0420"]}),Object(l.jsx)("img",{src:"https://pics.avs.io/99/36/".concat(e.carrier,".png"),alt:e.carrier})]}),e.segments.map((function(e){return Object(h.createElement)(W,Object(T.a)(Object(T.a)({},e),{},{key:e.duration}))}))]})}),J=(c(221),function(e){return Object(l.jsx)("div",{className:"aviasales-list-tickets",children:e.tickets.map((function(e){return Object(h.createElement)(A,Object(T.a)(Object(T.a)({},e),{},{key:"".concat(e.price+Math.random(),"-").concat(e.carrier)}))}))})}),G=o.a.Title,K=function(){return Object(l.jsx)("header",{className:"aviasales-header",children:Object(l.jsx)(G,{italic:!0,mark:!0,children:"Aviasales"})})},P=c(100),U=function(e){return Object(l.jsx)(P.a,{type:e.type,size:e.size,onClick:e.onClickHandler,children:e.label})},$=c(74),q=c.n($),L=c(111),Q=function(){var e=Object(L.a)(q.a.mark((function e(){var t,c;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://front-test.beta.aviasales.ru/search");case 2:return t=e.sent,e.next=5,t.json();case 5:return c=e.sent,e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(L.a)(q.a.mark((function e(t){var c,n,a;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=!0;case 1:if(!c){e.next=23;break}return e.prev=2,e.next=5,fetch("".concat("https://front-test.beta.aviasales.ru/tickets","?searchId=").concat(t));case 5:if(!((n=e.sent).status>=200&&n.status<=299)){e.next=13;break}return e.next=9,n.json();case 9:return a=e.sent,e.abrupt("return",a);case 13:throw c=!1,new Error("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a");case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(2),c=!0,console.log("---data",e.t0);case 21:e.next=1;break;case 23:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(t){return e.apply(this,arguments)}}(),V=(c(222),o.a.Text),X=O.a.TabPane,Y=function(){var e=Object(h.useState)(""),t=Object(d.a)(e,2),c=t[0],n=t[1],a=Object(h.useState)([]),s=Object(d.a)(a,2),i=s[0],r=s[1],o=Object(h.useState)(!1),j=Object(d.a)(o,2),u=j[0],g=j[1],w=Object(h.useState)(!0),_=Object(d.a)(w,2),N=_[0],T=_[1],S=Object(h.useState)(C),B=Object(d.a)(S,2),z=B[0],D=B[1],I=Object(h.useState)({tickets:[],viewTickets:[]}),W=Object(d.a)(I,2),A=W[0],G=W[1],P=Object(h.useState)(Object.keys(E)),$=Object(d.a)(P,2),q=$[0],L=$[1];Object(h.useEffect)((function(){Q().then((function(e){return n(e.searchId)})).catch((function(){return f.b.warning("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a, \u043f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443")}))}),[]),Object(h.useEffect)((function(){""!==c&&(u||R(c).then((function(e){if(g(Object(k.get)(e,"stop",!1)),r([].concat(Object(b.a)(i),Object(b.a)(Object(k.get)(e,"tickets",[])))),N){var t=F(i,z,q);G({tickets:t,viewTickets:t.slice().splice(0,5)})}T(!1)})))}),[u,c,i]),Object(h.useEffect)((function(){if(u){var e=F(i,z,q);G({tickets:e,viewTickets:e.slice().splice(0,5)})}}),[u,i,z,q]);var Y=function(){G({tickets:A.tickets,viewTickets:[].concat(Object(b.a)(A.viewTickets),Object(b.a)(A.tickets.slice().splice(A.viewTickets.length,5)))})};return Object(l.jsxs)("section",{className:"aviasales",children:[Object(l.jsx)(v.a,{title:"Back",onBack:function(){return window.history.back()}}),Object(l.jsx)(K,{}),Object(l.jsxs)("div",{className:"aviasales__wrapper",children:[Object(l.jsx)("aside",{className:"aviasales__filters",children:M.map((function(e){return Object(l.jsx)(y,{title:e.title,items:e.items,clickFilterHandler:L})}))}),Object(l.jsx)("div",{className:"aviasales__content",children:Object(l.jsx)(O.a,{defaultActiveKey:z,onChange:function(e){var t=F(i,e,q);D(e),G((function(){return{tickets:t,viewTickets:t.slice().splice(0,5)}}))},children:H.map((function(e){return Object(l.jsxs)(X,{tab:e.title,children:[Object(l.jsxs)(p.b,{direction:"vertical",children:[Object(l.jsx)(V,{children:"\u041c\u044b \u043d\u0430\u0448\u043b\u0438 ".concat(i.length," \u0431\u0438\u043b\u0435\u0442\u043e\u0432")}),Object(l.jsx)(V,{children:"\u041c\u044b \u043d\u0430\u0448\u043b\u0438 ".concat(A.tickets.length," \u0431\u0438\u043b\u0435\u0442\u043e\u0432 \u043f\u043e \u0432\u044b\u0431\u0440\u0430\u043d\u044b\u043c \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u043c")}),Object(l.jsx)(V,{children:"\u041f\u043e\u043a\u0430\u0437\u0430\u043d\u043e ".concat(A.viewTickets.length," \u0438\u0437 ").concat(A.tickets.length," \u0431\u0438\u043b\u0435\u0442\u043e\u0432")}),!u&&Object(l.jsx)(m.a,{})]}),0===q.length&&Object(l.jsx)(x.a,{description:"\u041c\u044b \u043d\u0430\u0448\u043b\u0438 ".concat(A.tickets.length," \u0431\u0438\u043b\u0435\u0442\u043e\u0432 \u043f\u043e \u0432\u044b\u0431\u0440\u0430\u043d\u044b\u043c \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u043c")}),A.tickets.length>0&&Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(J,{tickets:A.viewTickets}),Object(l.jsx)(U,{type:"primary",size:"large",onClickHandler:Y,label:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0435\u0449\u0451 ".concat(5," \u0431\u0438\u043b\u0435\u0442\u043e\u0432")})]})]},e.key)}))})})]})]})},Z=i.a.Content,ee=function(){return Object(l.jsx)(s.a,{children:Object(l.jsxs)(Z,{children:[Object(l.jsx)(r.a,{path:"/",component:u,exact:!0}),Object(l.jsx)(r.a,{path:"/aviasales",component:Y,exact:!0})]})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(Object(l.jsx)(s.a,{children:Object(l.jsx)(i.a,{children:Object(l.jsx)(ee,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[228,1,2]]]);
//# sourceMappingURL=main.39750445.chunk.js.map